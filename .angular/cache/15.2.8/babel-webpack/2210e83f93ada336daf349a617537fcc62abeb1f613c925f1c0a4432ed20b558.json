{"ast":null,"code":"import { WorkStatus } from 'src/app/enums/workStatus.enum';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/functionality.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction FunctionalityListComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"ul\")(2, \"li\")(3, \"h1\", 4);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"li\", 5);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"li\", 6);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"li\", 7);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 8)(12, \"div\")(13, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function FunctionalityListComponent_div_3_Template_button_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.editFunctionality(item_r1.ID));\n    });\n    i0.ɵɵtext(14, \" EDIT \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function FunctionalityListComponent_div_3_Template_button_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.showFunctionalityDetails(item_r1.ID));\n    });\n    i0.ɵɵtext(16, \" INFO \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function FunctionalityListComponent_div_3_Template_button_click_17_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.deleteFunctionality(item_r1.ID));\n    });\n    i0.ɵɵtext(18, \" DELETE \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Nazwa: \", item_r1.name, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Opis: \", item_r1.description, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Priorytet: \", item_r1.priority, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Status: \", item_r1.status, \"\");\n  }\n}\nexport class FunctionalityListComponent {\n  constructor(functionalityService, router) {\n    this.functionalityService = functionalityService;\n    this.router = router;\n    this.functionality = [];\n    this.functionalityService.getFunctionalities().subscribe(functionality => {\n      this.functionality = functionality;\n      this.updateFunctionalityStatus();\n    });\n  }\n  ngOnInit() {\n    console.log(this.functionality);\n  }\n  showFunctionalityDetails(ID) {\n    this.router.navigate(['/functionalities', ID]);\n  }\n  deleteFunctionality(id) {\n    this.functionalityService.deleteFunctionality(id).subscribe(() => {\n      console.log('Funkcjonalność została usunięta.');\n      this.functionality = this.functionality.filter(item => item.ID !== id);\n      this.updateFunctionalityStatus();\n    }, error => {\n      console.error('Wystąpił błąd podczas usuwania funkcjonalności:', error);\n    });\n  }\n  addFunctionality() {\n    this.router.navigate(['functionalities/create']);\n  }\n  editFunctionality(ID) {\n    this.router.navigate(['/functionality/edit', ID]);\n  }\n  updateFunctionalityStatus() {\n    this.functionality.forEach(func => {\n      const hasDoingTask = func.tasks?.some(task => task.state === WorkStatus.Doing);\n      const allTasksDone = func.tasks?.every(task => task.state === WorkStatus.Done);\n      if (hasDoingTask) {\n        func.status = WorkStatus.Doing;\n      } else if (allTasksDone) {\n        func.status = WorkStatus.Done;\n      } else {\n        func.status = WorkStatus.Todo; // Dodaj tę linijkę, jeśli chcesz, aby status był ustawiany na \"Pending\", gdy nie ma żadnych zadań lub gdy nie wszystkie są zakończone\n      }\n    });\n  }\n}\n\nFunctionalityListComponent.ɵfac = function FunctionalityListComponent_Factory(t) {\n  return new (t || FunctionalityListComponent)(i0.ɵɵdirectiveInject(i1.FunctionalityService), i0.ɵɵdirectiveInject(i2.Router));\n};\nFunctionalityListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FunctionalityListComponent,\n  selectors: [[\"app-functionality-list\"]],\n  decls: 6,\n  vars: 1,\n  consts: [[1, \"functionalities-container\"], [\"class\", \"functionality-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"create-button\", 3, \"click\"], [1, \"functionality-item\"], [1, \"functionality-name\"], [1, \"functionality-description\"], [1, \"functionality-priority\"], [1, \"functionality-status\"], [1, \"functionality-buttons\"], [1, \"edit-button\", 3, \"click\"], [1, \"details-button\", 3, \"click\"], [1, \"delete-button\", 3, \"click\"]],\n  template: function FunctionalityListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n      i0.ɵɵtext(2, \"List of functionalities\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, FunctionalityListComponent_div_3_Template, 19, 4, \"div\", 1);\n      i0.ɵɵelementStart(4, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function FunctionalityListComponent_Template_button_click_4_listener() {\n        return ctx.addFunctionality();\n      });\n      i0.ɵɵtext(5, \" Create functionality \");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.functionality);\n    }\n  },\n  dependencies: [i3.NgForOf],\n  styles: [\".functionalities-container[_ngcontent-%COMP%] {\\n  padding: 20px;\\n  background-color: #f0f0f0;\\n}\\n\\n.functionality-item[_ngcontent-%COMP%] {\\n  margin-bottom: 20px;\\n  padding: 10px;\\n  background-color: #fff;\\n  border: 1px solid #ccc;\\n  border-radius: 4px;\\n}\\n\\n.functionality-name[_ngcontent-%COMP%] {\\n  font-size: 18px;\\n  font-weight: bold;\\n}\\n\\n.functionality-description[_ngcontent-%COMP%] {\\n  margin-bottom: 5px;\\n}\\n\\n.functionality-priority[_ngcontent-%COMP%] {\\n  margin-bottom: 5px;\\n}\\n\\n.functionality-status[_ngcontent-%COMP%] {\\n  margin-bottom: 5px;\\n}\\n\\n.functionality-buttons[_ngcontent-%COMP%] {\\n  margin-top: 10px;\\n}\\n\\n.edit-button[_ngcontent-%COMP%], .details-button[_ngcontent-%COMP%], .delete-button[_ngcontent-%COMP%] {\\n  margin-right: 5px;\\n  font-size: 16px;\\n  padding: 5px 10px;\\n  background-color: black;\\n  color: white;\\n  border: none;\\n  border-radius: 4px;\\n}\\n\\n.create-button[_ngcontent-%COMP%] {\\n  margin-top: 20px;\\n  padding: 10px 20px;\\n  font-size: 16px;\\n  background-color: black;\\n  color: white;\\n  border: none;\\n  border-radius: 4px;\\n}\\n\\n.create-button[_ngcontent-%COMP%]:hover {\\n  background-color: #333;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZ1bmN0aW9uYWxpdHktbGlzdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBYTtFQUNiLHlCQUF5QjtBQUMzQjs7QUFFQTtFQUNFLG1CQUFtQjtFQUNuQixhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLHNCQUFzQjtFQUN0QixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBOzs7RUFHRSxpQkFBaUI7RUFDakIsZUFBZTtFQUNmLGlCQUFpQjtFQUNqQix1QkFBdUI7RUFDdkIsWUFBWTtFQUNaLFlBQVk7RUFDWixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZix1QkFBdUI7RUFDdkIsWUFBWTtFQUNaLFlBQVk7RUFDWixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxzQkFBc0I7QUFDeEIiLCJmaWxlIjoiZnVuY3Rpb25hbGl0eS1saXN0LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZnVuY3Rpb25hbGl0aWVzLWNvbnRhaW5lciB7XG4gIHBhZGRpbmc6IDIwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmMGYwZjA7XG59XG5cbi5mdW5jdGlvbmFsaXR5LWl0ZW0ge1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICBwYWRkaW5nOiAxMHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG59XG5cbi5mdW5jdGlvbmFsaXR5LW5hbWUge1xuICBmb250LXNpemU6IDE4cHg7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuXG4uZnVuY3Rpb25hbGl0eS1kZXNjcmlwdGlvbiB7XG4gIG1hcmdpbi1ib3R0b206IDVweDtcbn1cblxuLmZ1bmN0aW9uYWxpdHktcHJpb3JpdHkge1xuICBtYXJnaW4tYm90dG9tOiA1cHg7XG59XG5cbi5mdW5jdGlvbmFsaXR5LXN0YXR1cyB7XG4gIG1hcmdpbi1ib3R0b206IDVweDtcbn1cblxuLmZ1bmN0aW9uYWxpdHktYnV0dG9ucyB7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG59XG5cbi5lZGl0LWJ1dHRvbixcbi5kZXRhaWxzLWJ1dHRvbixcbi5kZWxldGUtYnV0dG9uIHtcbiAgbWFyZ2luLXJpZ2h0OiA1cHg7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgcGFkZGluZzogNXB4IDEwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xuICBjb2xvcjogd2hpdGU7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xufVxuXG4uY3JlYXRlLWJ1dHRvbiB7XG4gIG1hcmdpbi10b3A6IDIwcHg7XG4gIHBhZGRpbmc6IDEwcHggMjBweDtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcbiAgY29sb3I6IHdoaXRlO1xuICBib3JkZXI6IG5vbmU7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbn1cblxuLmNyZWF0ZS1idXR0b246aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzO1xufVxuIl19 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9mdW5jdGlvbmFsaXR5LWxpc3QvZnVuY3Rpb25hbGl0eS1saXN0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFhO0VBQ2IseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UsbUJBQW1CO0VBQ25CLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsc0JBQXNCO0VBQ3RCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGVBQWU7RUFDZixpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7OztFQUdFLGlCQUFpQjtFQUNqQixlQUFlO0VBQ2YsaUJBQWlCO0VBQ2pCLHVCQUF1QjtFQUN2QixZQUFZO0VBQ1osWUFBWTtFQUNaLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLHVCQUF1QjtFQUN2QixZQUFZO0VBQ1osWUFBWTtFQUNaLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLHNCQUFzQjtBQUN4Qjs7QUFFQSxna0VBQWdrRSIsInNvdXJjZXNDb250ZW50IjpbIi5mdW5jdGlvbmFsaXRpZXMtY29udGFpbmVyIHtcbiAgcGFkZGluZzogMjBweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDtcbn1cblxuLmZ1bmN0aW9uYWxpdHktaXRlbSB7XG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gIHBhZGRpbmc6IDEwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbn1cblxuLmZ1bmN0aW9uYWxpdHktbmFtZSB7XG4gIGZvbnQtc2l6ZTogMThweDtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5mdW5jdGlvbmFsaXR5LWRlc2NyaXB0aW9uIHtcbiAgbWFyZ2luLWJvdHRvbTogNXB4O1xufVxuXG4uZnVuY3Rpb25hbGl0eS1wcmlvcml0eSB7XG4gIG1hcmdpbi1ib3R0b206IDVweDtcbn1cblxuLmZ1bmN0aW9uYWxpdHktc3RhdHVzIHtcbiAgbWFyZ2luLWJvdHRvbTogNXB4O1xufVxuXG4uZnVuY3Rpb25hbGl0eS1idXR0b25zIHtcbiAgbWFyZ2luLXRvcDogMTBweDtcbn1cblxuLmVkaXQtYnV0dG9uLFxuLmRldGFpbHMtYnV0dG9uLFxuLmRlbGV0ZS1idXR0b24ge1xuICBtYXJnaW4tcmlnaHQ6IDVweDtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBwYWRkaW5nOiA1cHggMTBweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgYm9yZGVyOiBub25lO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG59XG5cbi5jcmVhdGUtYnV0dG9uIHtcbiAgbWFyZ2luLXRvcDogMjBweDtcbiAgcGFkZGluZzogMTBweCAyMHB4O1xuICBmb250LXNpemU6IDE2cHg7XG4gIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xuICBjb2xvcjogd2hpdGU7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xufVxuXG4uY3JlYXRlLWJ1dHRvbjpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMzMzM7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["WorkStatus","i0","FunctionalityListComponent","constructor","functionalityService","router","getFunctionalities","subscribe","functionality","updateFunctionalityStatus","ngOnInit","console","log","showFunctionalityDetails","ID","navigate","deleteFunctionality","id","filter","item","error","addFunctionality","editFunctionality","forEach","func","hasDoingTask","tasks","some","task","state","Doing","allTasksDone","every","Done","status","Todo","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/haze/Desktop/Angular Final Project/angularFinalProject/src/app/components/functionality-list/functionality-list.component.ts","/Users/haze/Desktop/Angular Final Project/angularFinalProject/src/app/components/functionality-list/functionality-list.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FunctionalityService } from 'src/app/services/functionality.service';\nimport { Router } from '@angular/router';\nimport { FunctionalityInterface } from 'src/app/interfaces/functionality.interface';\nimport { TaskInterface } from 'src/app/interfaces/task.interface';\nimport { WorkStatus } from 'src/app/enums/workStatus.enum';\n@Component({\n  selector: 'app-functionality-list',\n  templateUrl: './functionality-list.component.html',\n  styleUrls: ['./functionality-list.component.css'],\n})\nexport class FunctionalityListComponent implements OnInit {\n  functionality: FunctionalityInterface[] = [];\n\n  constructor(\n    private functionalityService: FunctionalityService,\n    private router: Router\n  ) {\n    this.functionalityService\n      .getFunctionalities()\n      .subscribe((functionality: FunctionalityInterface[]) => {\n        this.functionality = functionality;\n        this.updateFunctionalityStatus();\n      });\n  }\n\n  ngOnInit(): void {\n    console.log(this.functionality);\n  }\n\n  showFunctionalityDetails(ID: string) {\n    this.router.navigate(['/functionalities', ID]);\n  }\n\n  deleteFunctionality(id: string) {\n    this.functionalityService.deleteFunctionality(id).subscribe(\n      () => {\n        console.log('Funkcjonalność została usunięta.');\n        this.functionality = this.functionality.filter(\n          (item) => item.ID !== id\n        );\n        this.updateFunctionalityStatus();\n      },\n      (error) => {\n        console.error('Wystąpił błąd podczas usuwania funkcjonalności:', error);\n      }\n    );\n  }\n\n  addFunctionality() {\n    this.router.navigate(['functionalities/create']);\n  }\n\n  editFunctionality(ID: string) {\n    this.router.navigate(['/functionality/edit', ID]);\n  }\n\n  private updateFunctionalityStatus() {\n    this.functionality.forEach((func) => {\n      const hasDoingTask = func.tasks?.some(\n        (task) => task.state === WorkStatus.Doing\n      );\n      const allTasksDone = func.tasks?.every(\n        (task) => task.state === WorkStatus.Done\n      );\n\n      if (hasDoingTask) {\n        func.status = WorkStatus.Doing;\n      } else if (allTasksDone) {\n        func.status = WorkStatus.Done;\n      } else {\n        func.status = WorkStatus.Todo; // Dodaj tę linijkę, jeśli chcesz, aby status był ustawiany na \"Pending\", gdy nie ma żadnych zadań lub gdy nie wszystkie są zakończone\n      }\n    });\n  }\n}\n","<div class=\"functionalities-container\">\n  <h1>List of functionalities</h1>\n  <div *ngFor=\"let item of functionality\" class=\"functionality-item\">\n    <ul>\n      <li>\n        <h1 class=\"functionality-name\">Nazwa: {{ item.name }}</h1>\n      </li>\n      <li class=\"functionality-description\">Opis: {{ item.description }}</li>\n      <li class=\"functionality-priority\">Priorytet: {{ item.priority }}</li>\n      <li class=\"functionality-status\">Status: {{ item.status }}</li>\n    </ul>\n\n    <div class=\"functionality-buttons\">\n      <div>\n        <button class=\"edit-button\" (click)=\"editFunctionality(item.ID)\">\n          EDIT\n        </button>\n        <button\n          class=\"details-button\"\n          (click)=\"showFunctionalityDetails(item.ID)\"\n        >\n          INFO\n        </button>\n        <button class=\"delete-button\" (click)=\"deleteFunctionality(item.ID)\">\n          DELETE\n        </button>\n      </div>\n    </div>\n  </div>\n  <button class=\"create-button\" (click)=\"addFunctionality()\">\n    Create functionality\n  </button>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}