{"ast":null,"code":"import { WorkStatus } from 'src/app/enums/workStatus.enum';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/functionality.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction FunctionalityListComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"ul\")(2, \"li\")(3, \"h1\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"li\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"li\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"li\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\")(12, \"div\")(13, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function FunctionalityListComponent_div_3_Template_button_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.editFunctionality(item_r1.ID));\n    });\n    i0.ɵɵtext(14, \"\\u2699\\uFE0F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function FunctionalityListComponent_div_3_Template_button_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.showFunctionalityDetails(item_r1.ID));\n    });\n    i0.ɵɵtext(16, \"\\u2139\\uFE0E\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function FunctionalityListComponent_div_3_Template_button_click_17_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.deleteFunctionality(item_r1.ID));\n    });\n    i0.ɵɵtext(18, \"\\u274C\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Nazwa: \", item_r1.name, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Opis: \", item_r1.description, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Priorytet: \", item_r1.priority, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Status: \", item_r1.status, \"\");\n  }\n}\nexport class FunctionalityListComponent {\n  constructor(functionalityService, router) {\n    this.functionalityService = functionalityService;\n    this.router = router;\n    this.functionality = [];\n    this.functionalityService.getFunctionalities().subscribe(functionality => {\n      this.functionality = functionality;\n      this.updateFunctionalityStatus();\n    });\n  }\n  ngOnInit() {\n    console.log(this.functionality);\n  }\n  showFunctionalityDetails(ID) {\n    this.router.navigate(['/functionalities', ID]);\n  }\n  deleteFunctionality(id) {\n    this.functionalityService.deleteFunctionality(id).subscribe(() => {\n      console.log('Funkcjonalność została usunięta.');\n      this.functionality = this.functionality.filter(item => item.ID !== id);\n      this.updateFunctionalityStatus();\n    }, error => {\n      console.error('Wystąpił błąd podczas usuwania funkcjonalności:', error);\n    });\n  }\n  addFunctionality() {\n    this.router.navigate(['functionalities/create']);\n  }\n  editFunctionality(ID) {\n    this.router.navigate(['/functionality/edit', ID]);\n  }\n  updateFunctionalityStatus() {\n    this.functionality.forEach(func => {\n      const hasDoingTask = func.tasks?.some(task => task.state === WorkStatus.Doing);\n      const allTasksDone = func.tasks?.every(task => task.state === WorkStatus.Done);\n      if (hasDoingTask) {\n        func.status = WorkStatus.Doing;\n      } else if (allTasksDone) {\n        func.status = WorkStatus.Done;\n      } else {\n        func.status = WorkStatus.Todo; // Dodaj tę linijkę, jeśli chcesz, aby status był ustawiany na \"Pending\", gdy nie ma żadnych zadań lub gdy nie wszystkie są zakończone\n      }\n    });\n  }\n}\n\nFunctionalityListComponent.ɵfac = function FunctionalityListComponent_Factory(t) {\n  return new (t || FunctionalityListComponent)(i0.ɵɵdirectiveInject(i1.FunctionalityService), i0.ɵɵdirectiveInject(i2.Router));\n};\nFunctionalityListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FunctionalityListComponent,\n  selectors: [[\"app-functionality-list\"]],\n  decls: 6,\n  vars: 1,\n  consts: [[4, \"ngFor\", \"ngForOf\"], [3, \"click\"]],\n  template: function FunctionalityListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"h1\");\n      i0.ɵɵtext(2, \"List of functionalities\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, FunctionalityListComponent_div_3_Template, 19, 4, \"div\", 0);\n      i0.ɵɵelementStart(4, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function FunctionalityListComponent_Template_button_click_4_listener() {\n        return ctx.addFunctionality();\n      });\n      i0.ɵɵtext(5, \"Create functionality\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.functionality);\n    }\n  },\n  dependencies: [i3.NgForOf],\n  styles: [\"(()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n \\t\\\"use strict\\\";\\n \\t\\n \\t\\n })()[_ngcontent-%COMP%]\\n;\"]\n});","map":{"version":3,"mappings":"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","names":["WorkStatus","i0","FunctionalityListComponent","constructor","functionalityService","router","getFunctionalities","subscribe","functionality","updateFunctionalityStatus","ngOnInit","console","log","showFunctionalityDetails","ID","navigate","deleteFunctionality","id","filter","item","error","addFunctionality","editFunctionality","forEach","func","hasDoingTask","tasks","some","task","state","Doing","allTasksDone","every","Done","status","Todo","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/haze/Desktop/Angular Final Project/angularFinalProject/src/app/components/functionality-list/functionality-list.component.ts","/Users/haze/Desktop/Angular Final Project/angularFinalProject/src/app/components/functionality-list/functionality-list.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FunctionalityService } from 'src/app/services/functionality.service';\nimport { Router } from '@angular/router';\nimport { FunctionalityInterface } from 'src/app/interfaces/functionality.interface';\nimport { TaskInterface } from 'src/app/interfaces/task.interface';\nimport { WorkStatus } from 'src/app/enums/workStatus.enum';\n@Component({\n  selector: 'app-functionality-list',\n  templateUrl: './functionality-list.component.html',\n  styleUrls: ['./functionality-list.component.scss'],\n})\nexport class FunctionalityListComponent implements OnInit {\n  functionality: FunctionalityInterface[] = [];\n\n  constructor(\n    private functionalityService: FunctionalityService,\n    private router: Router\n  ) {\n    this.functionalityService\n      .getFunctionalities()\n      .subscribe((functionality: FunctionalityInterface[]) => {\n        this.functionality = functionality;\n        this.updateFunctionalityStatus();\n      });\n  }\n\n  ngOnInit(): void {\n    console.log(this.functionality);\n  }\n\n  showFunctionalityDetails(ID: string) {\n    this.router.navigate(['/functionalities', ID]);\n  }\n\n  deleteFunctionality(id: string) {\n    this.functionalityService.deleteFunctionality(id).subscribe(\n      () => {\n        console.log('Funkcjonalność została usunięta.');\n        this.functionality = this.functionality.filter(\n          (item) => item.ID !== id\n        );\n        this.updateFunctionalityStatus();\n      },\n      (error) => {\n        console.error('Wystąpił błąd podczas usuwania funkcjonalności:', error);\n      }\n    );\n  }\n\n  addFunctionality() {\n    this.router.navigate(['functionalities/create']);\n  }\n\n  editFunctionality(ID: string) {\n    this.router.navigate(['/functionality/edit', ID]);\n  }\n\n  private updateFunctionalityStatus() {\n    this.functionality.forEach((func) => {\n      const hasDoingTask = func.tasks?.some(\n        (task) => task.state === WorkStatus.Doing\n      );\n      const allTasksDone = func.tasks?.every(\n        (task) => task.state === WorkStatus.Done\n      );\n\n      if (hasDoingTask) {\n        func.status = WorkStatus.Doing;\n      } else if (allTasksDone) {\n        func.status = WorkStatus.Done;\n      } else {\n        func.status = WorkStatus.Todo; // Dodaj tę linijkę, jeśli chcesz, aby status był ustawiany na \"Pending\", gdy nie ma żadnych zadań lub gdy nie wszystkie są zakończone\n      }\n    });\n  }\n}\n","<div>\n  <h1>List of functionalities</h1>\n  <div *ngFor=\"let item of functionality\">\n    <ul>\n      <li>\n        <h1>Nazwa: {{ item.name }}</h1>\n      </li>\n      <li>Opis: {{ item.description }}</li>\n      <li>Priorytet: {{ item.priority }}</li>\n      <li>Status: {{ item.status }}</li>\n    </ul>\n\n    <div>\n      <div>\n        <button (click)=\"editFunctionality(item.ID)\">⚙️</button>\n        <button (click)=\"showFunctionalityDetails(item.ID)\">ℹ︎</button>\n        <button (click)=\"deleteFunctionality(item.ID)\">❌</button>\n      </div>\n    </div>\n  </div>\n  <button (click)=\"addFunctionality()\">Create functionality</button>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}