{"ast":null,"code":"import { WorkStatus } from 'src/app/enums/workStatus.enum';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/functionality.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction FunctionalityListComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"ul\")(2, \"li\")(3, \"h1\", 4);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"li\", 5);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"li\", 6);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"li\", 7);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 8)(12, \"div\")(13, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function FunctionalityListComponent_div_3_Template_button_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.editFunctionality(item_r1.ID));\n    });\n    i0.ɵɵtext(14, \"\\u2699\\uFE0F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function FunctionalityListComponent_div_3_Template_button_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.showFunctionalityDetails(item_r1.ID));\n    });\n    i0.ɵɵtext(16, \"\\u2139\\uFE0E\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function FunctionalityListComponent_div_3_Template_button_click_17_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.deleteFunctionality(item_r1.ID));\n    });\n    i0.ɵɵtext(18, \"\\u274C\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Nazwa: \", item_r1.name, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Opis: \", item_r1.description, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Priorytet: \", item_r1.priority, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Status: \", item_r1.status, \"\");\n  }\n}\nexport class FunctionalityListComponent {\n  constructor(functionalityService, router) {\n    this.functionalityService = functionalityService;\n    this.router = router;\n    this.functionality = [];\n    this.functionalityService.getFunctionalities().subscribe(functionality => {\n      this.functionality = functionality;\n      this.updateFunctionalityStatus();\n    });\n  }\n  ngOnInit() {\n    console.log(this.functionality);\n  }\n  showFunctionalityDetails(ID) {\n    this.router.navigate(['/functionalities', ID]);\n  }\n  deleteFunctionality(id) {\n    this.functionalityService.deleteFunctionality(id).subscribe(() => {\n      console.log('Funkcjonalność została usunięta.');\n      this.functionality = this.functionality.filter(item => item.ID !== id);\n      this.updateFunctionalityStatus();\n    }, error => {\n      console.error('Wystąpił błąd podczas usuwania funkcjonalności:', error);\n    });\n  }\n  addFunctionality() {\n    this.router.navigate(['functionalities/create']);\n  }\n  editFunctionality(ID) {\n    this.router.navigate(['/functionality/edit', ID]);\n  }\n  updateFunctionalityStatus() {\n    this.functionality.forEach(func => {\n      const hasDoingTask = func.tasks?.some(task => task.state === WorkStatus.Doing);\n      const allTasksDone = func.tasks?.every(task => task.state === WorkStatus.Done);\n      if (hasDoingTask) {\n        func.status = WorkStatus.Doing;\n      } else if (allTasksDone) {\n        func.status = WorkStatus.Done;\n      } else {\n        func.status = WorkStatus.Todo; // Dodaj tę linijkę, jeśli chcesz, aby status był ustawiany na \"Pending\", gdy nie ma żadnych zadań lub gdy nie wszystkie są zakończone\n      }\n    });\n  }\n}\n\nFunctionalityListComponent.ɵfac = function FunctionalityListComponent_Factory(t) {\n  return new (t || FunctionalityListComponent)(i0.ɵɵdirectiveInject(i1.FunctionalityService), i0.ɵɵdirectiveInject(i2.Router));\n};\nFunctionalityListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FunctionalityListComponent,\n  selectors: [[\"app-functionality-list\"]],\n  decls: 6,\n  vars: 1,\n  consts: [[1, \"functionalities-container\"], [\"class\", \"functionality-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"create-button\", 3, \"click\"], [1, \"functionality-item\"], [1, \"functionality-name\"], [1, \"functionality-description\"], [1, \"functionality-priority\"], [1, \"functionality-status\"], [1, \"functionality-buttons\"], [1, \"edit-button\", 3, \"click\"], [1, \"details-button\", 3, \"click\"], [1, \"delete-button\", 3, \"click\"]],\n  template: function FunctionalityListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n      i0.ɵɵtext(2, \"List of functionalities\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, FunctionalityListComponent_div_3_Template, 19, 4, \"div\", 1);\n      i0.ɵɵelementStart(4, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function FunctionalityListComponent_Template_button_click_4_listener() {\n        return ctx.addFunctionality();\n      });\n      i0.ɵɵtext(5, \"Create functionality\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.functionality);\n    }\n  },\n  dependencies: [i3.NgForOf],\n  styles: [\".functionalities-container[_ngcontent-%COMP%] {\\n    padding: 20px;\\n    background-color: #f0f0f0;\\n  }\\n  \\n  .functionality-item[_ngcontent-%COMP%] {\\n    margin-bottom: 20px;\\n    padding: 10px;\\n    background-color: #fff;\\n    border: 1px solid #ccc;\\n    border-radius: 4px;\\n  }\\n  \\n  .functionality-name[_ngcontent-%COMP%] {\\n    font-size: 18px;\\n    font-weight: bold;\\n  }\\n  \\n  .functionality-description[_ngcontent-%COMP%] {\\n    margin-bottom: 5px;\\n  }\\n  \\n  .functionality-priority[_ngcontent-%COMP%] {\\n    margin-bottom: 5px;\\n  }\\n  \\n  .functionality-status[_ngcontent-%COMP%] {\\n    margin-bottom: 5px;\\n  }\\n  \\n  .functionality-buttons[_ngcontent-%COMP%] {\\n    margin-top: 10px;\\n  }\\n  \\n  .edit-button[_ngcontent-%COMP%], .details-button[_ngcontent-%COMP%], .delete-button[_ngcontent-%COMP%] {\\n    margin-right: 5px;\\n    font-size: 16px;\\n    padding: 5px 10px;\\n  }\\n  \\n  .create-button[_ngcontent-%COMP%] {\\n    margin-top: 20px;\\n    padding: 10px 20px;\\n    font-size: 16px;\\n    background-color: #4caf50;\\n    color: #fff;\\n    border: none;\\n    border-radius: 4px;\\n  }\\n  \\n  .create-button[_ngcontent-%COMP%]:hover {\\n    background-color: #45a049;\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZ1bmN0aW9uYWxpdHktbGlzdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksYUFBYTtJQUNiLHlCQUF5QjtFQUMzQjs7RUFFQTtJQUNFLG1CQUFtQjtJQUNuQixhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLHNCQUFzQjtJQUN0QixrQkFBa0I7RUFDcEI7O0VBRUE7SUFDRSxlQUFlO0lBQ2YsaUJBQWlCO0VBQ25COztFQUVBO0lBQ0Usa0JBQWtCO0VBQ3BCOztFQUVBO0lBQ0Usa0JBQWtCO0VBQ3BCOztFQUVBO0lBQ0Usa0JBQWtCO0VBQ3BCOztFQUVBO0lBQ0UsZ0JBQWdCO0VBQ2xCOztFQUVBOzs7SUFHRSxpQkFBaUI7SUFDakIsZUFBZTtJQUNmLGlCQUFpQjtFQUNuQjs7RUFFQTtJQUNFLGdCQUFnQjtJQUNoQixrQkFBa0I7SUFDbEIsZUFBZTtJQUNmLHlCQUF5QjtJQUN6QixXQUFXO0lBQ1gsWUFBWTtJQUNaLGtCQUFrQjtFQUNwQjs7RUFFQTtJQUNFLHlCQUF5QjtFQUMzQiIsImZpbGUiOiJmdW5jdGlvbmFsaXR5LWxpc3QuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5mdW5jdGlvbmFsaXRpZXMtY29udGFpbmVyIHtcbiAgICBwYWRkaW5nOiAyMHB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmMGYwZjA7XG4gIH1cbiAgXG4gIC5mdW5jdGlvbmFsaXR5LWl0ZW0ge1xuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgcGFkZGluZzogMTBweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICB9XG4gIFxuICAuZnVuY3Rpb25hbGl0eS1uYW1lIHtcbiAgICBmb250LXNpemU6IDE4cHg7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIH1cbiAgXG4gIC5mdW5jdGlvbmFsaXR5LWRlc2NyaXB0aW9uIHtcbiAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gIH1cbiAgXG4gIC5mdW5jdGlvbmFsaXR5LXByaW9yaXR5IHtcbiAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gIH1cbiAgXG4gIC5mdW5jdGlvbmFsaXR5LXN0YXR1cyB7XG4gICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICB9XG4gIFxuICAuZnVuY3Rpb25hbGl0eS1idXR0b25zIHtcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICB9XG4gIFxuICAuZWRpdC1idXR0b24sXG4gIC5kZXRhaWxzLWJ1dHRvbixcbiAgLmRlbGV0ZS1idXR0b24ge1xuICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICBwYWRkaW5nOiA1cHggMTBweDtcbiAgfVxuICBcbiAgLmNyZWF0ZS1idXR0b24ge1xuICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgcGFkZGluZzogMTBweCAyMHB4O1xuICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNGNhZjUwO1xuICAgIGNvbG9yOiAjZmZmO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIH1cbiAgXG4gIC5jcmVhdGUtYnV0dG9uOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDVhMDQ5O1xuICB9XG4gIFxuICAiXX0= */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9mdW5jdGlvbmFsaXR5LWxpc3QvZnVuY3Rpb25hbGl0eS1saXN0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxhQUFhO0lBQ2IseUJBQXlCO0VBQzNCOztFQUVBO0lBQ0UsbUJBQW1CO0lBQ25CLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsc0JBQXNCO0lBQ3RCLGtCQUFrQjtFQUNwQjs7RUFFQTtJQUNFLGVBQWU7SUFDZixpQkFBaUI7RUFDbkI7O0VBRUE7SUFDRSxrQkFBa0I7RUFDcEI7O0VBRUE7SUFDRSxrQkFBa0I7RUFDcEI7O0VBRUE7SUFDRSxrQkFBa0I7RUFDcEI7O0VBRUE7SUFDRSxnQkFBZ0I7RUFDbEI7O0VBRUE7OztJQUdFLGlCQUFpQjtJQUNqQixlQUFlO0lBQ2YsaUJBQWlCO0VBQ25COztFQUVBO0lBQ0UsZ0JBQWdCO0lBQ2hCLGtCQUFrQjtJQUNsQixlQUFlO0lBQ2YseUJBQXlCO0lBQ3pCLFdBQVc7SUFDWCxZQUFZO0lBQ1osa0JBQWtCO0VBQ3BCOztFQUVBO0lBQ0UseUJBQXlCO0VBQzNCOzs7QUFHRixnakVBQWdqRSIsInNvdXJjZXNDb250ZW50IjpbIi5mdW5jdGlvbmFsaXRpZXMtY29udGFpbmVyIHtcbiAgICBwYWRkaW5nOiAyMHB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmMGYwZjA7XG4gIH1cbiAgXG4gIC5mdW5jdGlvbmFsaXR5LWl0ZW0ge1xuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgcGFkZGluZzogMTBweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICB9XG4gIFxuICAuZnVuY3Rpb25hbGl0eS1uYW1lIHtcbiAgICBmb250LXNpemU6IDE4cHg7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIH1cbiAgXG4gIC5mdW5jdGlvbmFsaXR5LWRlc2NyaXB0aW9uIHtcbiAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gIH1cbiAgXG4gIC5mdW5jdGlvbmFsaXR5LXByaW9yaXR5IHtcbiAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gIH1cbiAgXG4gIC5mdW5jdGlvbmFsaXR5LXN0YXR1cyB7XG4gICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICB9XG4gIFxuICAuZnVuY3Rpb25hbGl0eS1idXR0b25zIHtcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICB9XG4gIFxuICAuZWRpdC1idXR0b24sXG4gIC5kZXRhaWxzLWJ1dHRvbixcbiAgLmRlbGV0ZS1idXR0b24ge1xuICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICBwYWRkaW5nOiA1cHggMTBweDtcbiAgfVxuICBcbiAgLmNyZWF0ZS1idXR0b24ge1xuICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgcGFkZGluZzogMTBweCAyMHB4O1xuICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNGNhZjUwO1xuICAgIGNvbG9yOiAjZmZmO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIH1cbiAgXG4gIC5jcmVhdGUtYnV0dG9uOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDVhMDQ5O1xuICB9XG4gIFxuICAiXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["WorkStatus","i0","FunctionalityListComponent","constructor","functionalityService","router","getFunctionalities","subscribe","functionality","updateFunctionalityStatus","ngOnInit","console","log","showFunctionalityDetails","ID","navigate","deleteFunctionality","id","filter","item","error","addFunctionality","editFunctionality","forEach","func","hasDoingTask","tasks","some","task","state","Doing","allTasksDone","every","Done","status","Todo","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/haze/Desktop/Angular Final Project/angularFinalProject/src/app/components/functionality-list/functionality-list.component.ts","/Users/haze/Desktop/Angular Final Project/angularFinalProject/src/app/components/functionality-list/functionality-list.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FunctionalityService } from 'src/app/services/functionality.service';\nimport { Router } from '@angular/router';\nimport { FunctionalityInterface } from 'src/app/interfaces/functionality.interface';\nimport { TaskInterface } from 'src/app/interfaces/task.interface';\nimport { WorkStatus } from 'src/app/enums/workStatus.enum';\n@Component({\n  selector: 'app-functionality-list',\n  templateUrl: './functionality-list.component.html',\n  styleUrls: ['./functionality-list.component.css'],\n})\nexport class FunctionalityListComponent implements OnInit {\n  functionality: FunctionalityInterface[] = [];\n\n  constructor(\n    private functionalityService: FunctionalityService,\n    private router: Router\n  ) {\n    this.functionalityService\n      .getFunctionalities()\n      .subscribe((functionality: FunctionalityInterface[]) => {\n        this.functionality = functionality;\n        this.updateFunctionalityStatus();\n      });\n  }\n\n  ngOnInit(): void {\n    console.log(this.functionality);\n  }\n\n  showFunctionalityDetails(ID: string) {\n    this.router.navigate(['/functionalities', ID]);\n  }\n\n  deleteFunctionality(id: string) {\n    this.functionalityService.deleteFunctionality(id).subscribe(\n      () => {\n        console.log('Funkcjonalność została usunięta.');\n        this.functionality = this.functionality.filter(\n          (item) => item.ID !== id\n        );\n        this.updateFunctionalityStatus();\n      },\n      (error) => {\n        console.error('Wystąpił błąd podczas usuwania funkcjonalności:', error);\n      }\n    );\n  }\n\n  addFunctionality() {\n    this.router.navigate(['functionalities/create']);\n  }\n\n  editFunctionality(ID: string) {\n    this.router.navigate(['/functionality/edit', ID]);\n  }\n\n  private updateFunctionalityStatus() {\n    this.functionality.forEach((func) => {\n      const hasDoingTask = func.tasks?.some(\n        (task) => task.state === WorkStatus.Doing\n      );\n      const allTasksDone = func.tasks?.every(\n        (task) => task.state === WorkStatus.Done\n      );\n\n      if (hasDoingTask) {\n        func.status = WorkStatus.Doing;\n      } else if (allTasksDone) {\n        func.status = WorkStatus.Done;\n      } else {\n        func.status = WorkStatus.Todo; // Dodaj tę linijkę, jeśli chcesz, aby status był ustawiany na \"Pending\", gdy nie ma żadnych zadań lub gdy nie wszystkie są zakończone\n      }\n    });\n  }\n}\n","<div class=\"functionalities-container\">\n  <h1>List of functionalities</h1>\n  <div *ngFor=\"let item of functionality\" class=\"functionality-item\">\n    <ul>\n      <li>\n        <h1 class=\"functionality-name\">Nazwa: {{ item.name }}</h1>\n      </li>\n      <li class=\"functionality-description\">Opis: {{ item.description }}</li>\n      <li class=\"functionality-priority\">Priorytet: {{ item.priority }}</li>\n      <li class=\"functionality-status\">Status: {{ item.status }}</li>\n    </ul>\n\n    <div class=\"functionality-buttons\">\n      <div>\n        <button class=\"edit-button\" (click)=\"editFunctionality(item.ID)\">⚙️</button>\n        <button class=\"details-button\" (click)=\"showFunctionalityDetails(item.ID)\">ℹ︎</button>\n        <button class=\"delete-button\" (click)=\"deleteFunctionality(item.ID)\">❌</button>\n      </div>\n    </div>\n  </div>\n  <button class=\"create-button\" (click)=\"addFunctionality()\">Create functionality</button>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}